box: ruby:2.2.4

dev:
    steps:
        - bundle-install
        - internal/watch:
            code: bundle exec rake
            reload: true

build:
    steps:
        - bundle-install

        - script:
            name: show environment info
            code: |
                ruby --version
                bundle --version

        - script:
            name: lint and test
            code: bundle exec rake

deploy:
    steps:
        - heroku-deploy:
            key: $HEROKU_KEY
            user: $HEROKU_USER
            app-name: $HEROKU_APP_NAME
